# Cài đặt phiên bản php mong muốn trên Rocky hay CentOS 9(Options)
Trong nhiều trường hợp, phiên bản của PhP của các máy Webnode bị khác nhau khi tải dẫn đến nhiều trường hợp bị lỗi đồng bộ vì vậy ta cần phải biết chính xác máy nào đang dùng phiên bản PhP nào

### Rocky - CentOS 9
- **Dừng dịch vụ**: `sudo systemctl stop php-fpm`
- **Gỡ toàn bộ PHP & Extension**: 
```bash
sudo dnf remove -y 'php*'
rpm -qa | grep php
```
- **Reset module PHP**: `sudo dnf module reset php -y`
- **Cài Remi repo (chuẩn RHEL/Rocky)**
```bash
sudo dnf install -y epel-release
sudo dnf install -y https://rpms.remirepo.net/enterprise/remi-release-9.rpm
```
- **Chọn PHP version**: 
```bash
dnf module list php
sudo dnf module enable php:remi-8.4 -y
```
- **Cài PHP + extensions cần thiết cho WordPress**
```bash
sudo dnf install -y \
php php-fpm php-mysqlnd php-gd php-xml \
php-mbstring php-curl php-zip php-opcache
```
- **Bật FPM**: `sudo systemctl enable --now php-fpm`
- **Check lại phiên bản**
```bash
php -v
php-fpm -v
rpm -q php-fpm
```


### Ubuntu
```bash
sudo apt update
sudo apt install nginx
sudo apt install -y software-properties-common
sudo add-apt-repository ppa:ondrej/php -y
sudo apt update
```
```bash
sudo apt install -y \
  php8.1-fpm \
  php8.1-mysql \
  php8.1-cli \
  php8.1-curl \
  php8.1-gd \
  php8.1-mbstring \
  php8.1-xml \
  php8.1-zip
```
Khóa php version để tránh upgrade nhầm
```bash
sudo apt-mark hold php8.1*
```
- **Check trên Ubuntu**
```bash
ls /usr/sbin | grep php-fpm
php -v
